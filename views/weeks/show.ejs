<%- include('../partials/head') %>
<%- include('../partials/header') %>
    
    <h1><%= page.title %></h1>

    <div class="mini-report">
        
        <div class="column">
            <h2>Week starting:</h2>
            <div><%= weekStart %></div>
        </div>

        <div class="row col-1">
            <div class="column">
                <h2>Assignments:</h2>
                <div class="editor-locked"><%- week.assignments %></div>
            </div>
        </div>

        <div class="row col-2">

            <div class="column">
                <h2>Wins:</h2>
                <div class="editor-locked" id="wins"><%- week.wins %></div>
            </div>

            <div class="column">
                <h2>Struggles:</h2>
                <div class="editor-locked" id="struggles"><%- week.struggles %></div>
            </div>

            <script>
                const winsDiv = document.getElementById('wins');
                const winsHeight = winsDiv.scrollHeight;
                const strugglesDiv = document.getElementById('struggles');
                const strugglesHeight = strugglesDiv.scrollHeight;
                
                const borderTopBottom = 2; // 1px each, top and bottom

                if (strugglesHeight < winsHeight) {
                    strugglesDiv.style.height = `${winsHeight + borderTopBottom}px`;

                } else {
                    winsDiv.style.height = `${strugglesHeight + borderTopBottom}px`;
                }
            </script>

        </div>

        <div class="row form-control-buttons">        
            <a href="/weeks/<%= week._id %>/edit">
                <button>Edit</button>
            </a>
            <form id="delete-form" action="/weeks/<%=week._id%>?_method=DELETE" method="POST">
                <button id="submit-delete-btn" type="submit">
                    Delete
                </button>
            </form>
        </div>

    </div>

    <div id="delete-modal">
        <div class="inner">
            <p>Are you sure you want to delete this week?</p>
            <div class="row form-control-buttons"> 
                <button id="confirm-cancel-btn">Cancel</button>
                <button id="confirm-delete-btn">Delete</button>
            </div>
        </div>
    </div>

    <script src="/js/confirm-delete.js"></script>

<%- include('../partials/footer') %>